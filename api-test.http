@baseUrl = http://localhost:8000
@userId = 1
@teamId = 1
@companyId = 1

### Login as Admin
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "alice.admin@acme.com",
  "password": "ChangeMe123!"
}

###

@accessToken = {{login.response.body.accessToken}}
@accessTokenExpiresAt = {{login.response.body.accessTokenExpiresAt}}
@refreshToken = {{login.response.body.refreshToken}}
@refreshTokenExpiresAt = {{login.response.body.refreshTokenExpiresAt}}

### Refresh token
# @name refresh
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### Get current user
GET {{baseUrl}}/auth/me
Authorization: Bearer {{accessToken}}

### Create user
POST {{baseUrl}}/users
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "John",
  "surname": "Doe",
  "email": "aaa.bbb@example.com",
  "password": "P@ssw0rd!",
  "phone": "+11234567890",
  "role": "EMPLOYEE",
  "companyId": {{companyId}}
}

### Get all users
GET {{baseUrl}}/users
Authorization: Bearer {{accessToken}}

### Get user by id
GET {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{accessToken}}

### Update user
PATCH {{baseUrl}}/users/{{userId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "Johnny B. Goode",
  "phone": "+11987654321"
}

### Delete user
DELETE {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{accessToken}}

### Create company
POST {{baseUrl}}/companies
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "Acme Corp",
  "domain": "acme.com"
}

### Get all companies
GET {{baseUrl}}/companies
Authorization: Bearer {{accessToken}}

### Get company by id
GET {{baseUrl}}/companies/{{companyId}}
Authorization: Bearer {{accessToken}}

### Update company
PATCH {{baseUrl}}/companies/{{companyId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "Acme Corporation",
  "domain": "acme.example"
}

### Delete company
DELETE {{baseUrl}}/companies/{{companyId}}
Authorization: Bearer {{accessToken}}

### Create team
POST {{baseUrl}}/teams
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "Engineering",
  "companyId": {{companyId}}
}

### Get all teams
GET {{baseUrl}}/teams
Authorization: Bearer {{accessToken}}

### Get team by id
GET {{baseUrl}}/teams/{{teamId}}
Authorization: Bearer {{accessToken}}

### Update team
PATCH {{baseUrl}}/teams/{{teamId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "Product Engineering",
  "companyId": {{companyId}}
}

### Delete team
DELETE {{baseUrl}}/teams/{{teamId}}
Authorization: Bearer {{accessToken}}

### Create leave request
POST {{baseUrl}}/leave-requests
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "userId": {{userId}},
  "startsAt": "2025-11-01",
  "endsAt": "2025-11-05",
  "reason": "Vacation time",
  "status": "PENDING"
}

### Get all leave requests
GET {{baseUrl}}/leave-requests
Authorization: Bearer {{accessToken}}

### Get leave request by id
@leaveRequestId = 1
GET {{baseUrl}}/leave-requests/{{leaveRequestId}}
Authorization: Bearer {{accessToken}}

### Update leave request
PATCH {{baseUrl}}/leave-requests/{{leaveRequestId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "status": "APPROVED",
  "approvedBy": {{userId}}
}

### Delete leave request
DELETE {{baseUrl}}/leave-requests/{{leaveRequestId}}
Authorization: Bearer {{accessToken}}
